# 0.6 版本缺陷追踪文档

## 缺陷提交格式

### 缺陷编号规则
格式: `BUG-0.6-[序号]`  
示例: `BUG-0.6-001`

### 缺陷模板
```markdown
## 缺陷编号: [BUG-0.6-XXX]
**发现时间**: [YYYY-MM-DD HH:MM]
**严重级别**: [Critical/High/Medium/Low]
**影响范围**: [功能/性能/安全/兼容性]
**重现步骤**: 
1. [步骤1]
2. [步骤2]
3. [步骤3]

**期望结果**: [预期行为]
**实际结果**: [实际行为]
**错误信息**: [如有错误日志]
**相关文件**: [涉及的代码文件]
**测试环境**: [操作系统/版本/配置]
```

## 修复流程

### 1. 缺陷确认
- [ ] 缺陷已按模板完整填写
- [ ] 重现步骤清晰可执行
- [ ] 严重级别评估合理

### 2. 修复准备
- [ ] 从 main 分支创建修复分支: `hotfix/BUG-0.6-XXX`
- [ ] 编写测试用例验证缺陷
- [ ] 制定修复方案

### 3. 修复实施
- [ ] 修复代码实现
- [ ] 添加/更新测试用例
- [ ] 代码审查

### 4. 验证测试
- [ ] 单元测试通过
- [ ] 集成测试通过
- [ ] 手动验证修复

### 5. 合并发布
- [ ] 合并到 main 分支
- [ ] 更新版本号到 0.6.1
- [ ] 删除修复分支

## 当前缺陷状态

| 缺陷编号 | 状态 | 严重级别 | 描述 | 修复人 | 完成时间 |
|----------|------|----------|------|--------|----------|
| BUG-0.6-001 | ✅ 已修复 | Medium | deletion_queue.json 清理不完整 | Claude | 2025-07-19 13:45 |

## 版本标签

修复完成后将创建补丁版本标签:

- `v0.6.1` - 第一个补丁版本

- `v0.6.2` - 第二个补丁版本（如需要）

## 快速开始

**提交缺陷**: 请在此文档下方添加新的缺陷条目
**开始修复**: 确认缺陷后，我将创建对应的修复分支

## 缺陷编号: [BUG-0.6-001]

**发现时间**: [2025-07-19 13:35]

**严重级别**: [Medium]

**影响范围**: [功能]

**重现步骤**:

1. [步骤1]
正常启动机器人,并进入群组监控模式

2. [步骤2]
群成员在群中正常聊天,聊天的过程中产生的消息被机器人正确识别需要被记录到deletion_queue.json中

3. [步骤3]
用户手工删除群组对话中的消息

4. [步骤4]
执行/trigger_deletion命令,机器人开始根据deletion_queue.json中的消息进行删除操作.

**期望结果**: [deletion_queue.json中的消息被正确删除,如果部分群组的消息删除失败, deletion_queue.json 中的消息也应该被删除]

**实际结果**: [/trigger_deletion执行完成后,deletion_queue.json中的待删除列表没有完全被清空]

**错误信息**: [无]

**相关文件**: [bot.py, ./data/deletion_queue.json]

**测试环境**: [macOS 14.5.1, Python 3.13.6]